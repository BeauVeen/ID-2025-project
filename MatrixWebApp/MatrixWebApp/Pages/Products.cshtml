@page
@model MatrixWebApp.Pages.ProductsModel
@{
	ViewData["Title"] = "Producten";
}

<h1>Producten</h1>

@if (Model.Products == null || !Model.Products.Any())
{
	<p>Geen producten gevonden</p>
}
else
{
	<div class="d-flex flex-column gap-3">
		@foreach (var product in Model.Products)
		{
			<div class="d-flex border rounded p-3 align-items-center">
				<div style="width: 100px; height: 100px; overflow: hidden;" class="me-3">
					@if (product.Picture != null && product.Picture.Length > 0)
					{
						<img src="data:image/png;base64,@Convert.ToBase64String(product.Picture)"
							 alt="@product.Name" class="img-fluid"
							 style="max-height: 100%; object-fit: contain;" />
					}
					else
					{
						<div class="bg-secondary text-white d-flex justify-content-center align-items-center"
							 style="height: 100px; width: 100px;">
							Geen foto
						</div>
					}
				</div>

				<div class="flex-grow-1 d-flex flex-column justify-content-between ms-3">
					<h5 class="mb-1">@product.Name</h5>
					<small class="text-muted">Serienummer: @product.ProductId</small>
					<p class="mb-0">@product.Description</p>
				</div>

				<div class="d-flex flex-column justify-content-center align-items-center mx-3" style="min-width: 120px;">
					<div><strong>Voorraad:</strong> @product.Stock</div>
				</div>

				<div class="d-flex flex-column justify-content-center align-items-end" style="min-width: 120px;">
					<div><strong>@product.Price.ToString("C")</strong></div>
					<div class="text-muted"><small>Incl. btw: @((product.Price * 1.21M).ToString("C"))</small></div>
				</div>
			</div>
		}
	</div>
}